<!DOCTYPE html>
<html lang="zh" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N100 - PVE（fnOS+Debian）基建记录 - AcoFork Blog</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"/>
    <link rel="icon" href="https://q2.qlogo.cn/headimg_dl?dst_uin=2726730791&amp;spec=0">
    <script src="https://pic1.acofork.com/random.js"></script>
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.acofork.com/rss.xml">
    <script src="/js/main.js"></script>
</head>
<body class="bg-[var(--page-bg)] text-gray-900 dark:text-gray-100 transition-colors duration-300 min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md shadow-sm dark:border-b dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <div class="flex-shrink-0 flex items-center">
                        <a href="/" class="text-xl font-bold text-blue-600 dark:text-blue-400">AcoFork Blog</a>
                    </div>
                    <!-- Desktop Menu -->
                    <div class="hidden md:ml-6 md:flex md:space-x-8">
                        
                        <a href="&#x2F;" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           >
                            首页
                        </a>
                        
                        <a href="&#x2F;posts" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           >
                            归档
                        </a>
                        
                        <a href="&#x2F;friends" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           >
                            友链
                        </a>
                        
                        <a href="&#x2F;sponsors" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           >
                            赞助
                        </a>
                        
                        <a href="https:&#x2F;&#x2F;umami.acofork.com&#x2F;share&#x2F;CdkXbGgZr6ECKOyK" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           target="_blank">
                            统计
                        </a>
                        
                        <a href="https:&#x2F;&#x2F;status.acofork.com" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           target="_blank">
                            监控
                        </a>
                        
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- Mobile Menu Button -->
                    <button type="button" onclick="toggleMobileMenu()" class="md:hidden p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                        <span class="sr-only">Open menu</span>
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                    <!-- Search Button -->
                    <button onclick="toggleSearch()" class="p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                    <!-- Theme Toggle -->
                    <button onclick="toggleTheme()" class="p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                        <svg id="sun-icon" class="h-6 w-6 hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                        </svg>
                        <svg id="moon-icon" class="h-6 w-6 block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu (Hidden by default) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
            <div class="px-2 pt-2 pb-3 space-y-1">
                
                <a href="&#x2F;" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   >
                    首页
                </a>
                
                <a href="&#x2F;posts" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   >
                    归档
                </a>
                
                <a href="&#x2F;friends" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   >
                    友链
                </a>
                
                <a href="&#x2F;sponsors" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   >
                    赞助
                </a>
                
                <a href="https:&#x2F;&#x2F;umami.acofork.com&#x2F;share&#x2F;CdkXbGgZr6ECKOyK" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   target="_blank">
                    统计
                </a>
                
                <a href="https:&#x2F;&#x2F;status.acofork.com" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   target="_blank">
                    监控
                </a>
                
            </div>
        </div>
    </nav>

    <!-- Search Modal -->
    <div id="search-modal" class="fixed inset-0 z-50 hidden" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" onclick="toggleSearch()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto p-4 sm:p-6 md:p-20" onclick="if(event.target === this) toggleSearch()">
            <div class="mx-auto max-w-xl transform rounded-xl bg-white dark:bg-gray-800 p-2 shadow-2xl transition-all">
                <input type="text" id="search-input" 
                       class="w-full rounded-md border-0 bg-gray-100 dark:bg-gray-700 px-4 py-2.5 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-0 sm:text-sm" 
                       placeholder="搜索文章..." autocomplete="off">
                <ul id="search-results" class="max-h-96 scroll-py-3 overflow-y-auto p-3"></ul>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
<div class="max-w-4xl mx-auto">
    <!-- Post Header -->
    <header class="mb-8 text-center">
        <div class="flex items-center justify-center space-x-2 text-sm text-gray-500 dark:text-gray-400 mb-4">
            <time datetime="2024-10-28">2024-10-28</time>
            <span>•</span>
            <span>6 分钟阅读</span>
            <span id="views-separator" style="display: none">•</span>
            <span id="page-views" style="display: none"></span>
        </div>
        <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-6 leading-tight">N100 - PVE（fnOS+Debian）基建记录</h1>
        
        <p class="text-lg text-gray-600 dark:text-gray-300 mb-8 max-w-2xl mx-auto">在N100小主机上安装PVE，然后在其中安装飞牛NAS和Debian，实现追番建站分离，并且易扩展，易迁移</p>
        
        
        <div class="w-full rounded-2xl overflow-hidden shadow-sm mb-8">
            <img src="&#x2F;img&#x2F;4270a637719e6990244a3c32fbc3c275.webp" alt="N100 - PVE（fnOS+Debian）基建记录" class="w-full h-auto">
        </div>
        
    </header>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const baseUrl = 'https://umami.acofork.com';
                const shareId = 'CdkXbGgZr6ECKOyK';
                // Current page path
                const urlPath = window.location.pathname;
                
                const stats = await window.fetchUmamiStats(baseUrl, shareId, {
                    url: urlPath
                });
                
                // Check for both 'visits' (new preference) or 'pageviews' (fallback)
                const metric = (stats && (stats.visits || stats.pageviews));
                
                let views = 0;
                let hasData = false;

                if (metric && typeof metric.value !== 'undefined') {
                    views = metric.value;
                    hasData = true;
                } else if (stats && (typeof stats.visits === 'number' || typeof stats.pageviews === 'number')) {
                        // Fallback for flat structure
                        views = stats.visits || stats.pageviews;
                        hasData = true;
                }

                if (hasData) {
                    const viewEl = document.getElementById('page-views');
                    viewEl.textContent = views + ' 次访问';
                    viewEl.style.display = 'inline';
                    document.getElementById('views-separator').style.display = 'inline';
                }
            } catch (e) {
                console.error('Failed to load page views:', e);
            }
        });
    </script>

    <!-- Post Content -->
    <article class="prose prose-lg dark:prose-invert max-w-none bg-white dark:bg-gray-800 p-8 md:p-12 rounded-2xl shadow-sm">
        <h1 id="配置&amp;需求">配置&amp;需求</h1>
<ul>
<li>
<p>N100 CPU 频率：最小 700 Mhz, 最大 3400 Mhz | TDP：6 W</p>
</li>
<li>
<p>8G RAM</p>
</li>
<li>
<p>128G M.2 NVme SSD</p>
</li>
<li>
<p>512G SATA HDD</p>
</li>
<li>
<p>Realtek R8168 有线网卡</p>
</li>
<li>
<p>USB有线网卡</p>
</li>
<li>
<p>U盘（作PVE引导盘）</p>
</li>
</ul>
<h1 id="目标">目标</h1>
<ol>
<li>
<p>所有系统通过PVE管理</p>
</li>
<li>
<p>PVE下安装fnOS，作NAS并配置自动追番（直通：<code>N100核显</code> <code>512G SATA HDD</code> ）</p>
</li>
<li>
<p>PVE下安装Debian，搭建QQBot、博客、AList</p>
</li>
</ol>
<hr />
<h1 id="1._PVE">1. PVE</h1>
<h2 id="安装">安装</h2>
<ul>
<li>
<p>下载Ventoy最新版可执行文件：</p>
<p><a rel="noopener nofollow" target="_blank" href="https://www.ventoy.net/cn/download.html"><a rel="noopener nofollow" target="_blank" href="https://www.ventoy.net/cn/download.html">https://www.ventoy.net/cn/download.html</a></a></p>
<ul>
<li>使用GPT分区表，NTFS格式将Ventoy写入U盘</li>
</ul>
</li>
<li>
<p>下载PVE最新版ISO（使用USTC镜像源）：</p>
<p><a rel="noopener nofollow" target="_blank" href="https://mirrors.ustc.edu.cn/help/proxmox.html"><a rel="noopener nofollow" target="_blank" href="https://mirrors.ustc.edu.cn/help/proxmox.html">https://mirrors.ustc.edu.cn/help/proxmox.html</a></a></p>
<ul>
<li>将PVE的ISO文件放入U盘根目录</li>
</ul>
</li>
<li>
<p>插入USB网卡，U盘连接到到N100，开机从U盘启动，进入PVE安装界面，安装PVE。网络配置选择USB网卡</p>
</li>
<li>
<p>重启，进入PVE，通过IP+8006端口进入WebUI，登录进去</p>
</li>
</ul>
<h2 id="配置">配置</h2>
<h3 id="安装PVE快捷管理脚本">安装PVE快捷管理脚本</h3>
<ul>
<li>
<p>安装PVE快捷管理脚本：<a rel="noopener nofollow" target="_blank" href="https://alist.onani.cn/pve_source.tar.gz">pve_source.tar.gz | AcoFork-AList</a> 或 <a rel="noopener nofollow" target="_blank" href="https://wwp.lanzoul.com/ivHta1ngmo6d">**<a rel="noopener nofollow" target="_blank" href="https://wwp.lanzoul.com/ivHta1ngmo6d**">https://wwp.lanzoul.com/ivHta1ngmo6d**</a></a> （密码:i1ws）（来自：在下莫老师）</p>
<ul>
<li>
<p>解压：<code>tar zxvf pve_source.tar.gz</code></p>
</li>
<li>
<p>运行：<code>./pve_source</code></p>
</li>
<li>
<p>同意许可协议</p>
</li>
<li>
<p>依次执行白框操作<img src="/img/0d1662c5dfe1c759d43dd1950e06507e.webp" alt="" /></p>
</li>
<li>
<p>扩容local：<code>lvextend -rl +100%FREE /dev/pve/root</code></p>
</li>
</ul>
</li>
</ul>
<h3 id="配置Realtek_R8168网卡">配置Realtek R8168网卡</h3>
<blockquote>
<p>由于Debian系默认安装R8169驱动，我们需要手动安装R8168驱动，否则无法使用N100小主机自带的有线网口上网</p>
</blockquote>
<ul>
<li>
<p>下载驱动：</p>
<p><a rel="noopener nofollow" target="_blank" href="https://www.realtek.com/Download/List?cate_id=584"><a rel="noopener nofollow" target="_blank" href="https://www.realtek.com/Download/List?cate%5C_id=584">https://www.realtek.com/Download/List?cate\_id=584</a></a><img src="/img/bbbf44985b98c193eb1ca72199de34d8.webp" alt="" /></p>
</li>
<li>
<p>解压，安装：<code>sh autorun.sh</code></p>
</li>
<li>
<p>查看是否有新的网络接口：<code>ip a</code></p>
</li>
<li><pre data-lang="shell" class="language-shell "><code class="language-shell" data-lang="shell">root@n100-pve:~# ip a
...
2: enp3s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq master vmbr1 state UP group default qlen 1000
    link&#x2F;ether 00:e0:4c:08:91:a6 brd ff:ff:ff:ff:ff:ff
...
</code></pre>
</li>
<li>
<p>配置网络配置文件：<code>nano /etc/network/interfaces</code></p>
<pre><code># network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you&#x27;re doing.
#
# If you want to manage parts of the network configuration manually,
# please utilize the &#x27;source&#x27; or &#x27;source-directory&#x27; directives to do
# so.
# PVE will preserve these directives, but will NOT read its network
# configuration from sourced files, so do not attempt to move any of
# the PVE managed interfaces into external files!

auto lo
iface lo inet loopback

iface wlp1s0 inet manual

iface enp3s0 inet manual

auto vmbr1
iface vmbr1 inet static
        address 192.168.124.25&#x2F;24
        gateway 192.168.124.1
        bridge-ports enp3s0
        bridge-stp off
        bridge-fd 0

iface vmbr1 inet6 auto
        dhcp 1
        accept_ra 2
        request_prefix 1

source &#x2F;etc&#x2F;network&#x2F;interfaces.d&#x2F;*
</code></pre>
</li>
<li>
<p>重启网络服务：<code>systemctl restart networking</code></p>
</li>
<li>
<p>查看ip：<code>ip a</code></p>
<pre data-lang="shell" class="language-shell "><code class="language-shell" data-lang="shell">root@n100-pve:~# ip a
...
2: enp3s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq master vmbr1 state UP group default qlen 1000
    link&#x2F;ether 00:e0:4c:08:91:a6 brd ff:ff:ff:ff:ff:ff
...
4: vmbr1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link&#x2F;ether 00:e0:4c:08:91:a6 brd ff:ff:ff:ff:ff:ff
    inet 192.168.124.25&#x2F;24 scope global vmbr1
       valid_lft forever preferred_lft forever
    inet6 2409:8a30:320:7fc0:2e0:4cff:fe08:91a6&#x2F;64 scope global dynamic mngtmpaddr
       valid_lft 2763sec preferred_lft 2762sec
    inet6 fe80::2e0:4cff:fe08:91a6&#x2F;64 scope link
       valid_lft forever preferred_lft forever
</code></pre>
</li>
<li>
<p>卸除USB网卡</p>
</li>
</ul>
<h3 id="配置STUN穿透">配置STUN穿透</h3>
<h4 id="路由器设置DMZ主机为PVEIP">路由器设置DMZ主机为PVEIP</h4>
<ul>
<li><img src="/img/4a88e3944fddc9d31cdd936af9e1eeb7.webp" alt="" /></li>
</ul>
<h4 id="安装Lucky">安装Lucky</h4>
<ul>
<li>
<p>执行：<code>curl -o /tmp/install.sh http://6.666666.host:6/files/golucky.sh &amp;&amp; sh /tmp/install.sh http://6.666666.host:6/files 2.13.4</code></p>
</li>
<li>
<p>通过<code>host:16601</code> 进入Lucky后台，设置STUN穿透</p>
</li>
<li>
<p><img src="/img/680e40663d799730a847f9b37fb4a966.webp" alt="" /></p>
</li>
</ul>
<h1 id="2._fnOS">2. fnOS</h1>
<h2 id="安装-1">安装</h2>
<ul>
<li>
<p>前往官网下载最新版ISO：</p>
<p><a rel="noopener nofollow" target="_blank" href="https://www.fnnas.com/"><a rel="noopener nofollow" target="_blank" href="https://www.fnnas.com/">https://www.fnnas.com/</a></a></p>
</li>
<li>
<p>上传至PVE：<img src="/img/839a6e4c95cf97688c250f2ca0e47ae1.webp" alt="" /></p>
</li>
<li>
<p>创建fnOS虚拟机，CPU类型选择host，步骤略</p>
</li>
<li>
<p>直通核显和硬盘：<img src="/img/1eccd4de34634c25b2ef686d26672ea7.webp" alt="" /></p>
</li>
<li>
<p>如果你不知道你的核显和SATA控制器的PCI ID：<code>lspci</code></p>
<ul>
<li>
<p>可见核显为<code>00:02.0</code>，SATA控制器为<code>00:17.0</code></p>
<pre data-lang="shell" class="language-shell "><code class="language-shell" data-lang="shell">root@n100-pve:~# lspci
00:00.0 Host bridge: Intel Corporation Device 461c
00:02.0 VGA compatible controller: Intel Corporation Alder Lake-N [UHD Graphics]
00:0a.0 Signal processing controller: Intel Corporation Platform Monitoring Technology (rev 01)
00:14.0 USB controller: Intel Corporation Alder Lake-N PCH USB 3.2 xHCI Host Controller
00:14.2 RAM memory: Intel Corporation Alder Lake-N PCH Shared SRAM
00:16.0 Communication controller: Intel Corporation Alder Lake-N PCH HECI Controller
00:17.0 SATA controller: Intel Corporation Alder Lake-N SATA AHCI Controller
00:1a.0 SD Host controller: Intel Corporation Device 54c4
00:1c.0 PCI bridge: Intel Corporation Device 54be
00:1d.0 PCI bridge: Intel Corporation Alder Lake-N PCI Express Root Port
00:1d.1 PCI bridge: Intel Corporation Alder Lake-N PCI Express Root Port
00:1e.0 Communication controller: Intel Corporation Alder Lake-N Serial IO UART Host Controller
00:1e.3 Serial bus controller: Intel Corporation Device 54ab
00:1f.0 ISA bridge: Intel Corporation Alder Lake-N PCH eSPI Controller
00:1f.3 Audio device: Intel Corporation Alder Lake-N PCH High Definition Audio Controller
00:1f.4 SMBus: Intel Corporation Alder Lake-N SMBus
00:1f.5 Serial bus controller: Intel Corporation Alder Lake-N SPI (flash) Controller
01:00.0 Network controller: Intel Corporation Wireless 3160 (rev 83)
02:00.0 Non-Volatile memory controller: Realtek Semiconductor Co., Ltd. RTS5765DL NVMe SSD Controller (DRAM-less) (rev 01)
03:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111&#x2F;8168&#x2F;8411 PCI Express Gigabit Ethernet Controller (rev 2b)
</code></pre>
</li>
</ul>
</li>
<li>
<p>启动虚拟机，安装fnOS</p>
</li>
</ul>
<h2 id="配置-1">配置</h2>
<ul>
<li>
<p>前往飞牛设置，创建储存空间，Linear模式，选择刚才直通的硬盘<img src="/img/a520833bda8c57b05b66e4a55c91d810.webp" alt="" /></p>
</li>
<li>
<p>前往飞牛应用中心安装qBittorrent、影视，并且在设置给予目录读取权限<img src="/img/cf70e2839c777f8e3f699254fb3f6a98.webp" alt="" /></p>
</li>
<li>
<p>配置qBittorrent的用户名和密码</p>
</li>
<li>
<p>打开飞牛Docker，初始化</p>
</li>
<li>
<p>拉取并运行AutoBangumi Docker镜像：</p>
<pre data-lang="shell" class="language-shell "><code class="language-shell" data-lang="shell">docker run -d \
--name=AutoBangumi \
-v &#x2F;vol1&#x2F;1000&#x2F;AutoBangumi&#x2F;config:&#x2F;app&#x2F;config \
-v &#x2F;vol1&#x2F;1000&#x2F;AutoBangumi&#x2F;data:&#x2F;app&#x2F;data \
-p 7892:7892 \
-e TZ=Asia&#x2F;Shanghai \
-e PUID=$(id -u) \
-e PGID=$(id -g) \
-e UMASK=022 \
--network=bridge \
--dns=8.8.8.8 \
--restart unless-stopped \
ghcr.onani.cn&#x2F;estrellaxd&#x2F;auto_bangumi:latest
</code></pre>
</li>
<li>
<p>进入<code>host:7892</code> 让AutoBangumi连接qBittorrent并配置下载地址<img src="/img/2362136eabf346ef5fbb661404d5b668.webp" alt="" /></p>
</li>
<li>
<p>添加RSS。可前往<a rel="noopener nofollow" target="_blank" href="https://mikanime.tv/">蜜柑计划 - Mikan Project</a>获得各个字幕组的RSS</p>
<p><img src="/img/41dadfcbe0f0b378c21a2daa3148b58d.webp" alt="" /></p>
<p>注意：使用<a rel="noopener nofollow" target="_blank" href="https://mikanime.tv/">蜜柑计划 - Mikan Project</a>时，请订阅单个字幕组的RSS，不要使用个人的RSS，会导致<strong>只能获取到你所有追番的最新一集而不是单个番的全部剧集</strong></p>
</li>
<li>
<p>打开飞牛影视，初始化并设置媒体库<img src="/img/b2b59953b78625c722a1b5fa2d7db66c.webp" alt="" /></p>
<ul>
<li>
<p>注意：如果要刮削旧集旧番，请规范重命名，可以使用自动化工具：<a rel="noopener nofollow" target="_blank" href="https://alist.onani.cn/Episode-ReName.zip">Episode-ReName.zip | AcoFork-AList</a></p>
<ul>
<li>
<p>一级目录：即qb下载目录，无需重命名</p>
</li>
<li>
<p>二级目录：番剧名称</p>
</li>
<li>
<p>三级目录：季，如<code>Season 1</code></p>
</li>
<li>
<p>四级目录：集和字幕，如<code>S01E01.mp4</code> <code>S01E01.chs.ass</code></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="3._Debian">3. Debian</h1>
<h2 id="安装-2">安装</h2>
<ul>
<li>
<p>下载Debian12 ISO（USTC镜像源）（建议选择DVD镜像，包更全，安装更快）</p>
<p><a rel="noopener nofollow" target="_blank" href="https://mirrors.ustc.edu.cn/help/debian-cd.html"><a rel="noopener nofollow" target="_blank" href="https://mirrors.ustc.edu.cn/help/debian-cd.html">https://mirrors.ustc.edu.cn/help/debian-cd.html</a></a></p>
</li>
<li>
<p>上传至PVE，创建Debian虚拟机，CPU类型选择host，步骤略</p>
</li>
</ul>
<h3 id="安装1Panel：">安装1Panel：</h3>
<p><a rel="noopener nofollow" target="_blank" href="https://1panel.cn/docs/installation/online_installation/"><a rel="noopener nofollow" target="_blank" href="https://1panel.cn/docs/installation/online%5C_installation/">https://1panel.cn/docs/installation/online\_installation/</a></a></p>
<ul>
<li>在1Panel中安装<code>Openresty</code> <code>MySQL</code> <code>Halo</code> <code>AList</code> <code>Cloudflared</code> 配置步骤略</li>
</ul>
<h3 id="搭建QQBot">搭建QQBot</h3>
<h4 id="安装OneBotv11协议实现：Lagrange.OneBot">安装OneBotv11协议实现：Lagrange.OneBot</h4>
<ul>
<li>
<p>Docker Run：<code>docker run -td -p 8081:8081 -v /root/qqbot/lo:/app/data -e UID=$UID -e GID=$(id -g) ghcr.onani.cn/lagrangedev/lagrange.onebot:edge</code></p>
</li>
<li>
<p>修改配置文件：<code>appsettings.json</code></p>
<pre data-lang="json" class="language-json "><code class="language-json" data-lang="json">{
    &quot;Logging&quot;: {
        &quot;LogLevel&quot;: {
            &quot;Default&quot;: &quot;Information&quot;,
            &quot;Microsoft&quot;: &quot;Warning&quot;,
            &quot;Microsoft.Hosting.Lifetime&quot;: &quot;Information&quot;
        }
    },
    &quot;SignServerUrl&quot;: &quot;&quot;,
    &quot;SignProxyUrl&quot;: &quot;&quot;,
    &quot;MusicSignServerUrl&quot;: &quot;&quot;,
    &quot;Account&quot;: {
        &quot;Uin&quot;: 0,
        &quot;Password&quot;: &quot;&quot;,
        &quot;Protocol&quot;: &quot;Linux&quot;,
        &quot;AutoReconnect&quot;: true,
        &quot;GetOptimumServer&quot;: true
    },
    &quot;Message&quot;: {
        &quot;IgnoreSelf&quot;: true,
        &quot;StringPost&quot;: false
    },
    &quot;QrCode&quot;: {
        &quot;ConsoleCompatibilityMode&quot;: false
    },
    &quot;Implementations&quot;: [
        {
            &quot;Type&quot;: &quot;ReverseWebSocket&quot;,
            &quot;Host&quot;: &quot;192.168.124.34&quot;,
            &quot;Port&quot;: 9090,
            &quot;Suffix&quot;: &quot;&#x2F;onebot&#x2F;v11&#x2F;ws&quot;,
            &quot;ReconnectInterval&quot;: 5000,
            &quot;HeartBeatInterval&quot;: 5000,
            &quot;AccessToken&quot;: &quot;&quot;
        }
    ]
}
</code></pre>
</li>
<li>
<p>重启容器，扫码登录</p>
</li>
</ul>
<h4 id="安装NoneBot2">安装NoneBot2</h4>
<ul>
<li>
<p>安装pip：<code>apt install python3-pip</code></p>
</li>
<li>
<p>配置pip USTC源：<code>pip config set global.index-url &lt;https://mirrors.ustc.edu.cn/pypi/simple</code>&gt;</p>
</li>
<li>
<p>安装pipx：<code>apt install pipx</code></p>
</li>
<li>
<p>安装nb-cli：<code>pipx install nb-cli</code></p>
</li>
<li>
<p>设置pipx变量：<code>pipx ensurepath</code></p>
</li>
<li>
<p>安装nb bootstrap：<code>nb self install nb-cli-plugin-bootstrap</code></p>
</li>
<li>
<p>创建新NoneBot2项目：<code>nb bs</code></p>
</li>
<li><pre><code>root@n100-debian:~# nb bs
加载适配器列表中……
请输入项目名称
[?] 请输入 &gt; onani
[?] 请选择你想要使用的适配器 OneBot V11 (OneBot V11 协议)
请输入 Bot 超级用户，超级用户拥有对 Bot 的最高权限（如对接 QQ 填 QQ 号即可）（留空回车结束输入）
[?] 第 1 项 &gt; 666
[?] 第 2 项 &gt;
请输入 Bot 昵称，消息以 Bot 昵称开头可以代替艾特（留空回车结束输入）
[?] 第 1 项 &gt;
请输入 Bot 命令起始字符，消息以起始符开头将被识别为命令，
如果有一个指令为 查询，当该配置项中有 &quot;&#x2F;&quot; 时使用 &quot;&#x2F;查询&quot; 才能够触发，
留空将使用默认值 [&#x27;&#x27;, &#x27;&#x2F;&#x27;, &#x27;#&#x27;]（留空回车结束输入）
[?] 第 1 项 &gt;
请输入 Bot 命令分隔符，一般用于二级指令，
留空将使用默认值 [&#x27;.&#x27;, &#x27; &#x27;]（留空回车结束输入）
[?] 第 1 项 &gt;
请输入 NoneBot2 监听地址，如果要对公网开放，改为 0.0.0.0 即可
[?] 请输入 &gt; 0.0.0.0
请输入 NoneBot2 监听端口，范围 1 ~ 65535，请保证该端口号与连接端配置相同，或与端口映射配置相关
[?] 请输入 &gt; 9090
[?] 是否在项目目录中释出快捷启动脚本？ Yes
[?] 是否将 localstore 插件的存储路径重定向到项目路径下以便于后续迁移 Bot？ Yes
[?] 是否使用超级用户 Ping 指令回复插件？ Yes
[?] 是否安装 logpile 插件提供日志记录到文件功能？ Yes
[?] 是否在启动脚本中使用 webui 插件启动项目以使用网页管理 NoneBot？（该插件仍在开发中，不推荐用于生产环境） No
成功新建项目 onani
[?] 是否新建虚拟环境？ Yes
正在 &#x2F;root&#x2F;onani&#x2F;.venv 中创建虚拟环境
创建虚拟环境成功
[?] 是否需要修改或清除 pip 的 PyPI 镜像源配置？ No
[?] 是否立即安装项目依赖？ Yes
正在安装项目依赖
依赖安装成功
[?] 请选择需要启用的内置插件
项目配置完毕，开始使用吧！
</code></pre>
</li>
</ul>
<h1 id="成果展示（域名已弃用）">成果展示（域名已弃用）</h1>
<p><img src="/img/ba737a801a0b760aa0cef02ed7adc811.webp" alt="" /></p>
<p><a rel="noopener nofollow" target="_blank" href="https://blog.onani.cn"><a rel="noopener nofollow" target="_blank" href="https://blog.onani.cn">https://blog.onani.cn</a></a></p>
<p><a rel="noopener nofollow" target="_blank" href="https://alist.onani.cn"><a rel="noopener nofollow" target="_blank" href="https://alist.onani.cn">https://alist.onani.cn</a></a></p>
<p><img src="/img/bde17fb625f5e59f31a18df68fcb1e3b.webp" alt="" /></p>

    </article>

    <!-- License -->
    <div class="mt-8 p-6 bg-gray-50 dark:bg-gray-700/50 rounded-2xl text-sm text-gray-600 dark:text-gray-400">
        <div class="flex flex-col gap-2">
            <p class="font-medium text-gray-900 dark:text-white">版权声明</p>
            <p>
                本文由 <span class="font-medium">二叉树树</span> 创作，采用 
                <a href="https:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-nc-sa&#x2F;4.0&#x2F;" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline">CC BY-NC-SA 4.0</a> 
                许可协议。
            </p>
            <p>
                转载请注明出处：<a href="https:&#x2F;&#x2F;blog.acofork.com&#x2F;posts&#x2F;n100-pve&#x2F;" class="text-blue-600 dark:text-blue-400 hover:underline break-all">AcoFork Blog - N100 - PVE（fnOS+Debian）基建记录: https:&#x2F;&#x2F;blog.acofork.com&#x2F;posts&#x2F;n100-pve&#x2F;</a>
            </p>
        </div>
    </div>

    <!-- Help & Edit -->
    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-sm">
            <h3 class="font-bold text-gray-900 dark:text-white mb-2">这篇文章是否对你有帮助？</h3>
            <div class="flex space-x-4">
                <a href="&#x2F;posts&#x2F;pin" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">联系</a>
                <a href="&#x2F;sponsors" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">赞助</a>
            </div>
        </div>
        <div class="p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-sm">
            <h3 class="font-bold text-gray-900 dark:text-white mb-2">发现错误或想要改进这篇文章？</h3>
            <a href="https:&#x2F;&#x2F;github.com&#x2F;afoim&#x2F;AcoFork_Blog_Zola/blob/main/content/posts&#x2F;n100-pve.md" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline flex items-center">
                <span>在 GitHub 上编辑此页</span>
                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
            </a>
        </div>
    </div>

    <!-- Post Footer -->
    <footer class="mt-8 flex flex-wrap gap-2 justify-center">
        
        
        <a href="https://blog.acofork.com/tags/pve/" class="px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">#PVE</a>
        
        
    </footer>

    <!-- Comments (Giscus) -->
    <div class="mt-12 bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-sm">
<script src="https://giscus.app/client.js"
        data-repo="afoim/giscus-fuwari"
        data-repo-id="R_kgDOOi8quw"
        data-category="Announcements"
        data-category-id="DIC_kwDOOi8qu84CprDV"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>
    </div>
</div>

    </main>

    <!-- Footer -->
    <footer class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col items-center justify-center space-y-2">
                <p class="text-gray-500 dark:text-gray-400 text-sm">
                    &copy; 2026 二叉树树. 
                    <a href="https:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-nc-sa&#x2F;4.0&#x2F;" target="_blank" class="hover:underline">CC BY-NC-SA 4.0</a>
                </p>
                <p class="text-gray-400 dark:text-gray-500 text-xs">
                    Powered by <a href="https://www.getzola.org" target="_blank" class="hover:text-gray-300">Zola</a>
                     · <a href="https://github.com/afoim/AcoFork_Blog_Zola" target="_blank" class="hover:text-gray-300">Source Code</a>
                </p>
                <a href="https://blog.acofork.com/rss.xml" target="_blank" class="text-gray-400 hover:text-orange-500 dark:hover:text-orange-400 transition-colors p-2">
                    <span class="sr-only">RSS</span>
                    <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M5 3a1 1 0 000 2c5.523 0 10 4.477 10 10a1 1 0 102 0C17 8.373 11.627 3 5 3z"></path>
                        <path d="M4 9a1 1 0 011-1 7 7 0 017 7 1 1 0 11-2 0 5 5 0 00-5-5 1 1 0 01-1-1zM3 15a2 2 0 114 0 2 2 0 01-4 0z"></path>
                    </svg>
                </a>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
    <script src="/js/umami-share.js"></script>
    <script src="/js/search.js"></script>
    <script src="/js/gfm-alerts.js"></script>
    <script src="/js/anchor-fix.js"></script>
    <script>
        // Umami script needs to be loaded if it's not already
        // This is a workaround since we removed the original script tag
        (function() {
            var el = document.createElement('script');
            el.setAttribute('src', 'https://umami.acofork.com/script.js');
            el.setAttribute('data-website-id', '5d710dbd-3a2e-43e3-a553-97b415090c63');
            el.setAttribute('defer', '');
            document.body.appendChild(el);
        })();
    </script>
</body>
</html>
