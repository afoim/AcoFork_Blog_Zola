<!DOCTYPE html>
<html lang="zh" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦ç”¨Astroè·Ÿå¼±æ™ºä¸€èˆ¬çš„é™æ€æ„å»ºå›¾åƒä¼˜åŒ– - AcoFork Blog</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"/>
    <link rel="icon" href="https://q2.qlogo.cn/headimg_dl?dst_uin=2726730791&amp;spec=0">
    <script src="https://pic1.acofork.com/random.js"></script>
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.acofork.com/rss.xml">
    <script src="/js/main.js"></script>
</head>
<body class="bg-[var(--page-bg)] text-gray-900 dark:text-gray-100 transition-colors duration-300 min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md shadow-sm dark:border-b dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <div class="flex-shrink-0 flex items-center">
                        <a href="/" class="text-xl font-bold text-blue-600 dark:text-blue-400">AcoFork Blog</a>
                    </div>
                    <!-- Desktop Menu -->
                    <div class="hidden md:ml-6 md:flex md:space-x-8">
                        
                        <a href="&#x2F;" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           >
                            é¦–é¡µ
                        </a>
                        
                        <a href="&#x2F;posts" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           >
                            å½’æ¡£
                        </a>
                        
                        <a href="&#x2F;friends" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           >
                            å‹é“¾
                        </a>
                        
                        <a href="&#x2F;sponsors" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           >
                            èµåŠ©
                        </a>
                        
                        <a href="https:&#x2F;&#x2F;umami.acofork.com&#x2F;share&#x2F;CdkXbGgZr6ECKOyK" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           target="_blank">
                            ç»Ÿè®¡
                        </a>
                        
                        <a href="https:&#x2F;&#x2F;status.acofork.com" 
                           class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-300 dark:hover:text-white dark:hover:border-gray-600 transition duration-150 ease-in-out"
                           target="_blank">
                            ç›‘æ§
                        </a>
                        
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- Mobile Menu Button -->
                    <button type="button" onclick="toggleMobileMenu()" class="md:hidden p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                        <span class="sr-only">Open menu</span>
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                    <!-- Search Button -->
                    <button onclick="toggleSearch()" class="p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                    <!-- Theme Toggle -->
                    <button onclick="toggleTheme()" class="p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                        <svg id="sun-icon" class="h-6 w-6 hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                        </svg>
                        <svg id="moon-icon" class="h-6 w-6 block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu (Hidden by default) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
            <div class="px-2 pt-2 pb-3 space-y-1">
                
                <a href="&#x2F;" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   >
                    é¦–é¡µ
                </a>
                
                <a href="&#x2F;posts" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   >
                    å½’æ¡£
                </a>
                
                <a href="&#x2F;friends" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   >
                    å‹é“¾
                </a>
                
                <a href="&#x2F;sponsors" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   >
                    èµåŠ©
                </a>
                
                <a href="https:&#x2F;&#x2F;umami.acofork.com&#x2F;share&#x2F;CdkXbGgZr6ECKOyK" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   target="_blank">
                    ç»Ÿè®¡
                </a>
                
                <a href="https:&#x2F;&#x2F;status.acofork.com" 
                   class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 hover:bg-gray-50 dark:hover:bg-gray-700"
                   target="_blank">
                    ç›‘æ§
                </a>
                
            </div>
        </div>
    </nav>

    <!-- Search Modal -->
    <div id="search-modal" class="fixed inset-0 z-50 hidden" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" onclick="toggleSearch()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto p-4 sm:p-6 md:p-20" onclick="if(event.target === this) toggleSearch()">
            <div class="mx-auto max-w-xl transform rounded-xl bg-white dark:bg-gray-800 p-2 shadow-2xl transition-all">
                <input type="text" id="search-input" 
                       class="w-full rounded-md border-0 bg-gray-100 dark:bg-gray-700 px-4 py-2.5 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-0 sm:text-sm" 
                       placeholder="æœç´¢æ–‡ç« ..." autocomplete="off">
                <ul id="search-results" class="max-h-96 scroll-py-3 overflow-y-auto p-3"></ul>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
<div class="max-w-4xl mx-auto">
    <!-- Post Header -->
    <header class="mb-8 text-center">
        <div class="flex items-center justify-center space-x-2 text-sm text-gray-500 dark:text-gray-400 mb-4">
            <time datetime="2025-09-10">2025-09-10</time>
            <span>â€¢</span>
            <span>7 åˆ†é’Ÿé˜…è¯»</span>
            <span id="views-separator" style="display: none">â€¢</span>
            <span id="page-views" style="display: none"></span>
        </div>
        <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-6 leading-tight">ç¦ç”¨Astroè·Ÿå¼±æ™ºä¸€èˆ¬çš„é™æ€æ„å»ºå›¾åƒä¼˜åŒ–</h1>
        
        <p class="text-lg text-gray-600 dark:text-gray-300 mb-8 max-w-2xl mx-auto">æŠ˜è…¾äº†æ•´æ•´ä¸€å¤©ï¼Œç»ˆäºè§£å†³äº†è¿™å‚»é€¼Astroå¯¹äºé™æ€æ„å»ºè‡ªä½œèªæ˜çš„å›¾ç‰‡ä¼˜åŒ–äº†ï¼Œè¿™ä¸ä»…èƒ½æé«˜æ„å»ºé€Ÿåº¦ï¼Œè¿˜å¯ä»¥å‡å°‘æ— è°“çš„CPUèµ„æºæ¶ˆè€—ï¼Œæ›´ç¯ä¿ï¼Œä¹Ÿæ›´ç¬¦åˆUnixå“²å­¦</p>
        
        
        <div class="w-full rounded-2xl overflow-hidden shadow-sm mb-8">
            <img src="&#x2F;img&#x2F;456e85e999aea199704b788fcff77fc0.png" alt="ç¦ç”¨Astroè·Ÿå¼±æ™ºä¸€èˆ¬çš„é™æ€æ„å»ºå›¾åƒä¼˜åŒ–" class="w-full h-auto">
        </div>
        
    </header>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const baseUrl = 'https://umami.acofork.com';
                const shareId = 'CdkXbGgZr6ECKOyK';
                // Current page path
                const urlPath = window.location.pathname;
                
                const stats = await window.fetchUmamiStats(baseUrl, shareId, {
                    url: urlPath
                });
                
                // Check for both 'visits' (new preference) or 'pageviews' (fallback)
                const metric = (stats && (stats.visits || stats.pageviews));
                
                let views = 0;
                let hasData = false;

                if (metric && typeof metric.value !== 'undefined') {
                    views = metric.value;
                    hasData = true;
                } else if (stats && (typeof stats.visits === 'number' || typeof stats.pageviews === 'number')) {
                        // Fallback for flat structure
                        views = stats.visits || stats.pageviews;
                        hasData = true;
                }

                if (hasData) {
                    const viewEl = document.getElementById('page-views');
                    viewEl.textContent = views + ' æ¬¡è®¿é—®';
                    viewEl.style.display = 'inline';
                    document.getElementById('views-separator').style.display = 'inline';
                }
            } catch (e) {
                console.error('Failed to load page views:', e);
            }
        });
    </script>

    <!-- Post Content -->
    <article class="prose prose-lg dark:prose-invert max-w-none bg-white dark:bg-gray-800 p-8 md:p-12 rounded-2xl shadow-sm">
        <blockquote>
<p>è§†é¢‘ï¼š <a rel="noopener nofollow" target="_blank" href="https://www.bilibili.com/video/BV12VH2z1EDb">ç¦ç”¨Astroè·Ÿå¼±æ™ºä¸€èˆ¬çš„é™æ€æ„å»ºå›¾åƒä¼˜åŒ–_å“”å“©å“”å“©_bilibili</a></p>
</blockquote>
<h1 id="ä¸ºä»€ä¹ˆè¦ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–ï¼Ÿ">ä¸ºä»€ä¹ˆè¦ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–ï¼Ÿ</h1>
<p>ä¸‹å›¾æ˜¯ä¸€ä¸ªé»˜è®¤çš„Astroé™æ€æ„å»ºï¼Œä¹Ÿå°±æ˜¯ <code>astro build</code> çš„è¾“å‡ºï¼Œè¾“å‡ºä¸­è®°å½•äº†æ¯å¼ å›¾ç‰‡æ˜¯å¦‚ä½•è¢«Astro â€œä¼˜åŒ–â€ çš„ã€‚æˆ‘ä»¬ä¸éš¾å‘ç°é—®é¢˜æ‰€åœ¨ï¼š</p>
<p>å‹ç¼©æ•ˆæœå¾®ä¹å…¶å¾®ï¼Œç”šè‡³æœ‰åå‘å‹ç¼©ã€‚å¤§éƒ¨åˆ†å›¾ç‰‡ä»…å‹ç¼©äº†å‡ kbï¼Œä½†æ˜¯ä¸ºæ­¤éœ€è¦èŠ±è´¹ <strong>100-1000ms</strong> ä¸ç­‰ï¼Œç”šè‡³ç¬¬12è¡Œå‡ºç°äº† <code>before: 26kb, after: 28kb</code> è¿™æ ·çš„åå‘å‹ç¼©</p>
<p><em>ä¸ºä»€ä¹ˆè¦æµªè´¹è¿™ä¹ˆå¤šçš„æ—¶é—´æ¥è¿›è¡ŒÂ±10kbå·¦å³çš„å›¾ç‰‡å‹ç¼©å‘¢ï¼Ÿ</em></p>
<p><img src="/img/fb692a0b81cdfbff9021c50f6a58dcdd.png" alt="" /></p>
<h1 id="å¦‚ä½•è®©Astroä¸â€ä¼˜åŒ–â€œå›¾ç‰‡ï¼Ÿ">å¦‚ä½•è®©Astroä¸â€ä¼˜åŒ–â€œå›¾ç‰‡ï¼Ÿ</h1>
<blockquote>
<p><a rel="noopener nofollow" target="_blank" href="https://docs.astro.build/zh-cn/guides/images/">å›¾åƒ | Docs</a></p>
</blockquote>
<p>æŸ¥é˜… Astro æ–‡æ¡£å¯çŸ¥</p>
<p>ä¼šè¢«ä¼˜åŒ–çš„æƒ…å†µï¼š</p>
<ul>
<li>
<p>é <code>/public</code> ç›®å½•ä¸‹çš„å›¾ç‰‡</p>
</li>
<li>
<p>ä½¿ç”¨ <code>&lt;Image /&gt;</code> ç­‰Astroå›¾ç‰‡ç»„ä»¶</p>
</li>
<li>
<p>ä»»ä½•MarkDownå†…çš„å›¾ç‰‡ï¼Œé™¤éä½ ä¸èµ°Astroå†…éƒ¨çš„ MarkDown -&gt; HTML è½¬æ¢</p>
</li>
</ul>
<p>ä¸éš¾å‘ç°ï¼Œæˆ‘ä»¬ä¼¼ä¹å·²ç»æ‰¾åˆ°äº†ä¸€ä¸ªæŠ˜ä¸­çš„è§£å†³æ–¹æ¡ˆï¼š <strong>å°†å›¾ç‰‡æ”¾ç½®åˆ° /public ç›®å½•</strong></p>
<h1 id="å°è¯•å°†å›¾ç‰‡æ”¾ç½®åˆ°_/public_ç›®å½•ï¼ˆä¸å®Œç¾ï¼‰">å°è¯•å°†å›¾ç‰‡æ”¾ç½®åˆ° /public ç›®å½•ï¼ˆä¸å®Œç¾ï¼‰</h1>
<p>è¿™ä¼šé‡åˆ°ä¸€ä¸ªç»å…¸é—®é¢˜ï¼Œè¿™æ˜¯æˆ‘è¯¢é—® OpenAI ChatGPT çš„åŸè¯</p>
<p><em>æˆ‘é‡åˆ°äº†ä¸€ä¸ªä¸¤éš¾çš„é—®é¢˜ æˆ‘ä½¿ç”¨Astro æˆ‘çš„æ–‡ç« åœ¨./src/content/posts/xxx.md æˆ‘çš„å›¾ç‰‡ä¹‹å‰åœ¨./src/content/assets/images/xxx.png ç”±äºæˆ‘ä¸æƒ³è¦Astroé»˜è®¤çš„å›¾ç‰‡ä¼˜åŒ–ï¼Œå› ä¸ºæ„å»ºå¤ªæ…¢äº†ï¼Œäºæ˜¯æˆ‘å°†å›¾ç‰‡æ”¾åˆ°äº†./public/assets/images/xxx.png ç„¶åæˆ‘å°†MarkDownå¼•ç”¨çš„å›¾ç‰‡ä» ../assets/images/xxx.png æ”¹ä¸ºäº† ./public/assets/images/xxx.png ä½†æ˜¯ç°åœ¨æ–°çš„é—®é¢˜å‡ºç°äº†ï¼Œæˆ‘çš„MarkTextï¼ˆä¸€ä¸ªMarkDownç¼–è¾‘å™¨ï¼‰å»å¯»æ‰¾äº† ./src/content/posts/public/assets/images/xxx.png å¯¼è‡´æˆ‘åœ¨ç¼–è¾‘å™¨ä¸­çœ‹ä¸åˆ°ä»»ä½•å›¾ç‰‡ æœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Ÿ</em></p>
<p>å¦‚æœåå…¶é“è€Œè¡Œä¹‹ï¼Œä½¿ç”¨ç±»ä¼¼ <code>../../../assets/images/xxx.png</code> ä¼šå¯¼è‡´éƒ¨åˆ†ç»„ä»¶æ— æ³•è·å¾—çœŸå®å›¾ç‰‡ï¼Œå¯¼è‡´ <code>astro build</code> ç›´æ¥æŠ¥é”™é€€å‡ºï¼Œæ¯”å¦‚æ¯ç¯‡æ–‡ç« å¼€å¤´çš„ YAML å…ƒæ•°æ®ä¸­çš„ <code>image</code> å­—æ®µ</p>
<p><strong>ç»“è®ºï¼š</strong> è¯¥æ–¹æ¡ˆå¹¶ä¸å®Œç¾ã€‚è¦ä¸æ— æ³•å³å†™å³çœ‹ï¼Œè¦ä¸æ„å»ºå¤±è´¥</p>
<h1 id="å°è¯•ä½¿ç”¨Astroå®˜æ–¹æä¾›çš„é…ç½®ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–ï¼ˆå¤±è´¥ï¼‰">å°è¯•ä½¿ç”¨Astroå®˜æ–¹æä¾›çš„é…ç½®ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–ï¼ˆå¤±è´¥ï¼‰</h1>
<p>é‡åˆ°Astroä¸Šçš„é—®é¢˜ï¼Œé¦–å…ˆå°±åº”è¯¥æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£äº†è§£æ˜¯å¦å·²æœ‰è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡æ–‡æ¡£æŸ¥è¯¢ï¼Œæˆ‘æ‰¾åˆ°äº† <a rel="noopener nofollow" target="_blank" href="https://docs.astro.build/zh-cn/guides/images/#%E9%85%8D%E7%BD%AE-no-op-%E9%80%8F%E4%BC%A0%E6%9C%8D%E5%8A%A1">å›¾åƒ | Docs</a> ä¸­çš„ <strong>é…ç½® no-op é€ä¼ æœåŠ¡</strong> ï¼Œå°è¯•é…ç½®ï¼Œä½†æ˜¯æ— ç”¨ï¼Œä¸ç®¡æ˜¯æœ¬åœ°è¿è¡Œæ„å»ºæˆ–Cloudflare Workeräº‘ç«¯æ„å»ºï¼Œä»ç„¶ä¼šè§¦å‘ <strong>generating optimized images</strong> æ­¥éª¤</p>
<p><em>å¦‚æœæ‚¨äº†è§£å¦‚ä½•åœ¨Astroçš„é…ç½®å±‚é¢ç›´æ¥ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–ï¼Œè¯·è”ç³»æˆ‘ï¼æˆ‘å¾ˆä¹æ„ä¸æ‚¨äº¤æµï¼</em></p>
<p><img src="/img/4a7224311fcae6ab5b23557728cfda50.png" alt="" /></p>
<h1 id="å°è¯•ç›´æ¥æ›´æ”¹Astroæºç æ¥ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–ï¼ˆæˆåŠŸï¼‰">å°è¯•ç›´æ¥æ›´æ”¹Astroæºç æ¥ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–ï¼ˆæˆåŠŸï¼‰</h1>
<p>ç ”ç©¶åˆ°è¿™ï¼Œå¤§åŠå¤©å·²ç»è¿‡å»äº†ï¼Œæˆ‘å·²ç»æ²¡æœ‰ç²¾åŠ›å»ç ”ç©¶æ€ä¹ˆ <strong>åˆæ³•</strong> ç¦ç”¨Astroçš„å›¾ç‰‡ä¼˜åŒ–äº†ï¼Œä¸å¦‚å•åˆ€ç›´å…¥ï¼Œç›´æ¥æ”¹æºç ï¼Œä½¿ç”¨ <strong>éæ³•æ“ä½œ</strong> å§</p>
<p>å¤§è‡´æ­¥éª¤ï¼Œç›´æ¥æ”¹AstroåŒ…çš„æºç ï¼Œç„¶åç”¨ <code>pnpm patch</code> ä¸ºå®ƒæ‰“ä¸ªè¡¥ä¸ï¼Œä¸‹é¢æ˜¯å®Œæ•´ã€å¯ç”¨çš„ <code>astro.patch</code> ã€‚å…¨å±€ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–</p>
<pre data-lang="diff" class="language-diff "><code class="language-diff" data-lang="diff">diff --git a&#x2F;dist&#x2F;assets&#x2F;utils&#x2F;transformToPath.js b&#x2F;dist&#x2F;assets&#x2F;utils&#x2F;transformToPath.js
index cca8548dec42090b0621d1f21c86f503d5bba1be..8b0a3cfcea73abc4d63592709bb9ba2b2f83989a 100644
--- a&#x2F;dist&#x2F;assets&#x2F;utils&#x2F;transformToPath.js
+++ b&#x2F;dist&#x2F;assets&#x2F;utils&#x2F;transformToPath.js
@@ -13,7 +13,9 @@ function propsToFilename(filePath, transform, hash) {
   }
   const prefixDirname = isESMImportedImage(transform.src) ? dirname(filePath) : &quot;&quot;;
   let outputExt = transform.format ? `.${transform.format}` : ext;
-  return decodeURIComponent(`${prefixDirname}&#x2F;${filename}_${hash}${outputExt}`);
+  
+  &#x2F;&#x2F; Force disable image optimization - return original path without hash and format conversion
+  return decodeURIComponent(`${prefixDirname}&#x2F;${filename}${ext}`);
 }
 function hashTransform(transform, imageService, propertiesToHash) {
   const hashFields = propertiesToHash.reduce(
diff --git a&#x2F;dist&#x2F;core&#x2F;build&#x2F;generate.js b&#x2F;dist&#x2F;core&#x2F;build&#x2F;generate.js
index 3144f4c058b161b9e6eb3c8d891b743b34783653..0ba275b320204e154307c6aff75452e9dcb2300d 100644
--- a&#x2F;dist&#x2F;core&#x2F;build&#x2F;generate.js
+++ b&#x2F;dist&#x2F;core&#x2F;build&#x2F;generate.js
@@ -91,7 +91,8 @@ ${bgGreen(black(` ${verb} static routes `))}`);
 `)
   );
   const staticImageList = getStaticImageList();
-  if (staticImageList.size) {
+  &#x2F;&#x2F; Force disable image optimization - hardcoded
+  if (false) {
     logger.info(&quot;SKIP_FORMAT&quot;, `${bgGreen(black(` generating optimized images `))}`);
     const totalCount = Array.from(staticImageList.values()).map((x) =&gt; x.transforms.size).reduce((a, b) =&gt; a + b, 0);
     const cpuCount = os.cpus().length;
</code></pre>
<p>ä¸‹æ–‡ä¸ºæˆ‘è®©OpenAI ChatGPT 5è§£é‡Šçš„å·²ç»ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–çš„è¡¥ä¸ï¼ˆ<code>astro.patch</code>ï¼‰å…·ä½“åšäº†ä»€ä¹ˆ</p>
<h3 id="ä¿®æ”¹ç‚¹_1ï¼šdist/assets/utils/transformToPath.js">ä¿®æ”¹ç‚¹ 1ï¼š<code>dist/assets/utils/transformToPath.js</code></h3>
<pre data-lang="diff" class="language-diff "><code class="language-diff" data-lang="diff">-  return decodeURIComponent(`${prefixDirname}&#x2F;${filename}_${hash}${outputExt}`);
+  
+  &#x2F;&#x2F; Force disable image optimization - return original path without hash and format conversion
+  return decodeURIComponent(`${prefixDirname}&#x2F;${filename}${ext}`);
</code></pre>
<h4 id="åŸé€»è¾‘">åŸé€»è¾‘</h4>
<ul>
<li>
<p>åŸæœ¬çš„è¿”å›è·¯å¾„æ˜¯ï¼š</p>
<pre data-lang="bash" class="language-bash "><code class="language-bash" data-lang="bash">{prefixDirname}&#x2F;{filename}_{hash}.{format or ext}
</code></pre>
<ul>
<li>
<p><code>prefixDirname</code>ï¼šå¦‚æœå›¾ç‰‡æ˜¯é€šè¿‡ ESM import è¿›æ¥çš„ï¼Œä¼šå¸¦ä¸Šæ‰€åœ¨ç›®å½•ï¼Œå¦åˆ™ä¸ºç©ºã€‚</p>
</li>
<li>
<p><code>filename</code>ï¼šæ–‡ä»¶åã€‚</p>
</li>
<li>
<p><code>hash</code>ï¼šåŸºäºå›¾ç‰‡å‚æ•°ç”Ÿæˆçš„ hashï¼Œç”¨äºåŒºåˆ†ä¸åŒå°ºå¯¸/æ ¼å¼ã€‚</p>
</li>
<li>
<p><code>outputExt</code>ï¼šå¯èƒ½æ˜¯ <code>webp</code>ã€<code>avif</code> ç­‰æ ¼å¼ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>ğŸ‘‰ è¿™æ · Astro ä¼šç»™å›¾ç‰‡æ–‡ä»¶ç”Ÿæˆå¸¦ hash çš„è·¯å¾„ï¼Œå¹¶ä¸”å¯èƒ½ä¿®æ”¹æ ¼å¼ã€‚</p>
<h4 id="ä¿®æ”¹åé€»è¾‘">ä¿®æ”¹åé€»è¾‘</h4>
<ul>
<li>è¿”å›è·¯å¾„æ”¹æˆäº†ï¼š</li>
</ul>
<pre data-lang="bash" class="language-bash "><code class="language-bash" data-lang="bash">{prefixDirname}&#x2F;{filename}{ext}
</code></pre>
<ul>
<li>ç›´æ¥ä½¿ç”¨åŸå§‹æ‰©å±•åï¼Œä¸å¸¦ hashï¼Œä¹Ÿä¸åšæ ¼å¼è½¬æ¢ã€‚</li>
</ul>
<p>âœ… ä½œç”¨ï¼šå®Œå…¨ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–çš„æ–‡ä»¶åè§„åˆ™ï¼Œä¿ç•™åŸå§‹æ–‡ä»¶è·¯å¾„ã€‚</p>
<hr />
<h3 id="ä¿®æ”¹ç‚¹_2ï¼šdist/core/build/generate.js">ä¿®æ”¹ç‚¹ 2ï¼š<code>dist/core/build/generate.js</code></h3>
<pre data-lang="diff" class="language-diff "><code class="language-diff" data-lang="diff">-  if (staticImageList.size) {
+  &#x2F;&#x2F; Force disable image optimization - hardcoded
+  if (false) {
</code></pre>
<h4 id="åŸé€»è¾‘-1">åŸé€»è¾‘</h4>
<ul>
<li>
<p><code>staticImageList</code> å­˜æ”¾äº† Astro build æ—¶éœ€è¦ä¼˜åŒ–çš„æ‰€æœ‰é™æ€å›¾ç‰‡ã€‚</p>
</li>
<li>
<p>å¦‚æœæœ‰å›¾ç‰‡ï¼ŒAstro ä¼šå¯åŠ¨ä¼˜åŒ–é€»è¾‘ï¼š</p>
<ul>
<li>
<p>æ‰“å°æ—¥å¿— <code>"generating optimized images"</code></p>
</li>
<li>
<p>éå† <code>staticImageList</code>ï¼Œå¹¶è°ƒç”¨ image service å»ç”Ÿæˆä¸åŒå°ºå¯¸å’Œæ ¼å¼ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 id="ä¿®æ”¹åé€»è¾‘-1">ä¿®æ”¹åé€»è¾‘</h4>
<ul>
<li>
<p>æŠŠ <code>if (staticImageList.size)</code> æ”¹æˆäº† <code>if (false)</code>ã€‚</p>
</li>
<li>
<p>è¿™æ„å‘³ç€ <strong>Astro æ°¸è¿œä¸ä¼šè¿›å…¥ä¼˜åŒ–å›¾ç‰‡çš„æµç¨‹</strong>ã€‚</p>
</li>
</ul>
<p>âœ… ä½œç”¨ï¼šå¼ºåˆ¶è·³è¿‡æ‰€æœ‰å›¾ç‰‡ä¼˜åŒ–æ­¥éª¤ã€‚</p>
<hr />
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>ä½ çš„è¿™ä¸ª patch åšäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>
<p><strong>ç»•è¿‡æ–‡ä»¶å hash å’Œæ ¼å¼è½¬æ¢</strong> â†’ ä¿è¯ç”Ÿæˆçš„å›¾ç‰‡è·¯å¾„å°±æ˜¯åŸå§‹è·¯å¾„ã€‚</p>
</li>
<li>
<p><strong>å®Œå…¨ç¦ç”¨æ„å»ºæ—¶å›¾ç‰‡ä¼˜åŒ–</strong> â†’ Astro build æ—¶ä¸å†ç”Ÿæˆä»»ä½•è¡ç”Ÿæ ¼å¼æˆ–å¤šå°ºå¯¸å›¾ç‰‡ã€‚</p>
</li>
</ol>
<p>ç­‰ä»·äº <strong>å½»åº•å…³é—­ Astro çš„å›¾ç‰‡ä¼˜åŒ–åŠŸèƒ½</strong>ï¼Œæ„å»ºå‡ºæ¥çš„å°±æ˜¯ä½ åŸå§‹çš„å›¾ç‰‡ã€‚</p>
<h1 id="æœ€ç»ˆæ•ˆæœ">æœ€ç»ˆæ•ˆæœ</h1>
<p>ä»»ä½•æƒ…å†µä¸‹ä½¿ç”¨ <code>astro build</code> éƒ½ä¼šè·³è¿‡å›¾ç‰‡ä¼˜åŒ–ï¼ŒCloudflare Workerçš„æ„å»ºæ—¶é—´ä» 3åˆ†é’Ÿä¸‹é™åˆ°2åˆ†é’Ÿ</p>
<p><img src="/img/3b2225a40a1f80da37cd31367465ed0a.png" alt="" /></p>
<p><img src="/img/2c2d3f96732dac8a0b20fd1603c10491.png" alt="" /></p>
<p>æ„å»ºåçš„é¡µé¢ä¸å†ä¸ºå…¨å±€webpï¼Œé€ä¼ åŸå§‹æ–‡ä»¶åã€æ‰©å±•åã€‚ä½†ä»ç„¶ä¿ç•™äº† <code>/_astro</code> è·¯å¾„ï¼Œä¾æ—§æ”¯æŒç›¸å¯¹è·¯å¾„ç²˜è´´å›¾ç‰‡</p>
<p><img src="/img/87b7ed16c4ac08bd4f2f24272f96ccc3.png" alt="" /></p>
<p><img src="/img/667fdec32ab6df918654b8021b73fcc2.png" alt="" /></p>

    </article>

    <!-- License -->
    <div class="mt-8 p-6 bg-gray-50 dark:bg-gray-700/50 rounded-2xl text-sm text-gray-600 dark:text-gray-400">
        <div class="flex flex-col gap-2">
            <p class="font-medium text-gray-900 dark:text-white">ç‰ˆæƒå£°æ˜</p>
            <p>
                æœ¬æ–‡ç”± <span class="font-medium">äºŒå‰æ ‘æ ‘</span> åˆ›ä½œï¼Œé‡‡ç”¨ 
                <a href="https:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-nc-sa&#x2F;4.0&#x2F;" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline">CC BY-NC-SA 4.0</a> 
                è®¸å¯åè®®ã€‚
            </p>
            <p>
                è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼š<a href="https:&#x2F;&#x2F;blog.acofork.com&#x2F;posts&#x2F;disable-astro-generating-optimized-images&#x2F;" class="text-blue-600 dark:text-blue-400 hover:underline break-all">AcoFork Blog - ç¦ç”¨Astroè·Ÿå¼±æ™ºä¸€èˆ¬çš„é™æ€æ„å»ºå›¾åƒä¼˜åŒ–: https:&#x2F;&#x2F;blog.acofork.com&#x2F;posts&#x2F;disable-astro-generating-optimized-images&#x2F;</a>
            </p>
        </div>
    </div>

    <!-- Help & Edit -->
    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-sm">
            <h3 class="font-bold text-gray-900 dark:text-white mb-2">è¿™ç¯‡æ–‡ç« æ˜¯å¦å¯¹ä½ æœ‰å¸®åŠ©ï¼Ÿ</h3>
            <div class="flex space-x-4">
                <a href="&#x2F;posts&#x2F;pin" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">è”ç³»</a>
                <a href="&#x2F;sponsors" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">èµåŠ©</a>
            </div>
        </div>
        <div class="p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-sm">
            <h3 class="font-bold text-gray-900 dark:text-white mb-2">å‘ç°é”™è¯¯æˆ–æƒ³è¦æ”¹è¿›è¿™ç¯‡æ–‡ç« ï¼Ÿ</h3>
            <a href="https:&#x2F;&#x2F;github.com&#x2F;afoim&#x2F;AcoFork_Blog_Zola/blob/main/content/posts&#x2F;disable-astro-generating-optimized-images.md" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline flex items-center">
                <span>åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</span>
                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
            </a>
        </div>
    </div>

    <!-- Post Footer -->
    <footer class="mt-8 flex flex-wrap gap-2 justify-center">
        
        
        <a href="https://blog.acofork.com/tags/astro/" class="px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">#Astro</a>
        
        
    </footer>

    <!-- Comments (Giscus) -->
    <div class="mt-12 bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-sm">
<script src="https://giscus.app/client.js"
        data-repo="afoim/giscus-fuwari"
        data-repo-id="R_kgDOOi8quw"
        data-category="Announcements"
        data-category-id="DIC_kwDOOi8qu84CprDV"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>
    </div>
</div>

    </main>

    <!-- Footer -->
    <footer class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col items-center justify-center space-y-2">
                <p class="text-gray-500 dark:text-gray-400 text-sm">
                    &copy; 2026 äºŒå‰æ ‘æ ‘. 
                    <a href="https:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-nc-sa&#x2F;4.0&#x2F;" target="_blank" class="hover:underline">CC BY-NC-SA 4.0</a>
                </p>
                <p class="text-gray-400 dark:text-gray-500 text-xs">
                    Powered by <a href="https://www.getzola.org" target="_blank" class="hover:text-gray-300">Zola</a>
                     Â· <a href="https://github.com/afoim/AcoFork_Blog_Zola" target="_blank" class="hover:text-gray-300">Source Code</a>
                </p>
                <a href="https://blog.acofork.com/rss.xml" target="_blank" class="text-gray-400 hover:text-orange-500 dark:hover:text-orange-400 transition-colors p-2">
                    <span class="sr-only">RSS</span>
                    <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M5 3a1 1 0 000 2c5.523 0 10 4.477 10 10a1 1 0 102 0C17 8.373 11.627 3 5 3z"></path>
                        <path d="M4 9a1 1 0 011-1 7 7 0 017 7 1 1 0 11-2 0 5 5 0 00-5-5 1 1 0 01-1-1zM3 15a2 2 0 114 0 2 2 0 01-4 0z"></path>
                    </svg>
                </a>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
    <script src="/js/umami-share.js"></script>
    <script src="/js/search.js"></script>
    <script src="/js/gfm-alerts.js"></script>
    <script src="/js/anchor-fix.js"></script>
    <script>
        // Umami script needs to be loaded if it's not already
        // This is a workaround since we removed the original script tag
        (function() {
            var el = document.createElement('script');
            el.setAttribute('src', 'https://umami.acofork.com/script.js');
            el.setAttribute('data-website-id', '5d710dbd-3a2e-43e3-a553-97b415090c63');
            el.setAttribute('defer', '');
            document.body.appendChild(el);
        })();
    </script>
</body>
</html>
