@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --page-bg: #e5e7eb; /* Changed from #f3f4f6 (gray-100) to #e5e7eb (gray-200) for more contrast */
    }
    .dark {
        --page-bg: #111827;
        /* Increase base text contrast in dark mode */
        color: #f3f4f6; /* gray-100 */
    }
    body {
        @apply bg-[var(--page-bg)] text-gray-900 dark:text-gray-100;
    }
}

@layer components {
    /* GFM Alerts */
    .prose blockquote.gfm-alert {
        font-style: normal;
    }
    .prose blockquote.gfm-alert p::before,
    .prose blockquote.gfm-alert p::after {
        content: none !important;
    }

    /* Inline Code Styling - Only apply to code NOT inside pre */
    .prose :not(pre) > code {
        @apply bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded font-normal text-gray-800 dark:text-gray-200;
    }
    
    /* Remove quotes from ALL code elements */
    .prose code::before,
    .prose code::after {
        content: none !important;
    }

    /* Zola Syntax Highlighting Support */
    .z-code {
        @apply block overflow-x-auto p-4 rounded-lg my-4;
    }
    
    /* Ensure code blocks have correct text color regardless of theme */
    pre[data-lang] {
        @apply text-sm md:text-base leading-relaxed;
    }

    /* Prevent long URLs from breaking layout */
    .prose a,
    .prose p,
    .prose li,
    .prose blockquote {
        @apply break-words;
        word-break: break-word; /* Better handling for long text/URLs */
        overflow-wrap: break-word;
    }
    
    /* Force break-all for actual links to ensure no overflow */
    .prose a {
        word-break: break-all;
    }

    /* Anchor Links */
    .prose .z-anchor {
        @apply text-gray-300 dark:text-gray-600 no-underline ml-2 opacity-0 transition-opacity duration-200 select-none;
        word-break: normal !important; /* Don't break the anchor symbol */
    }
    
    .prose h1:hover .z-anchor,
    .prose h2:hover .z-anchor,
    .prose h3:hover .z-anchor,
    .prose h4:hover .z-anchor {
        @apply opacity-100;
    }

    /* Fix anchor scroll position (offset by navbar height) */
    .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
        scroll-margin-top: 5rem; /* Adjust based on navbar height (h-16 = 4rem + extra space) */
    }
}
